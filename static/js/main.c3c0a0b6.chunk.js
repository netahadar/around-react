(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),i=n(6),c=n.n(i),s=(n(14),n(9)),r=n(2),l=n.p+"static/media/logo.c7581985.svg",u=n(0);function d(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsx)("img",{className:"header__logo",src:l,alt:"around the u.s. logo"})})}var p=o.a.createContext();function b(e){var t=e.card,n=e.onCardClick,a=e.onCardLike,i=e.onDeletePostClick,c=o.a.useContext(p);var s=t.owner._id===c._id,r="gallery__trash-button ".concat(s?"gallery__trash-button_visible":"gallery__trash-button_hidden"),l=t.likes.some((function(e){return e._id===c._id})),d="gallery__like-button ".concat(l&&"gallery__like-button_active");return Object(u.jsxs)("li",{className:"gallery__item",children:[Object(u.jsx)("button",{className:r,type:"button","aria-label":"delete button",onClick:function(){i(t)}}),Object(u.jsx)("div",{className:"gallery__photo",style:{backgroundImage:"url(".concat(t.link,")")},onClick:function(){n(t)}}),Object(u.jsxs)("div",{className:"gallery__description",children:[Object(u.jsx)("h2",{className:"gallery__text",children:t.name}),Object(u.jsxs)("div",{className:"gallery__like-container",children:[Object(u.jsx)("button",{className:d,type:"button","aria-label":"like button",onClick:function(){a(t)}}),Object(u.jsx)("p",{className:"gallery__like-counter",children:t.likes.length})]})]})]})}function j(e){var t=e.onEditProfileClick,n=e.onAddPlaceClick,a=e.onEditAvatarClick,i=e.onDeletePostClick,c=e.onCardClick,s=e.cards,r=e.onCardLike,l=o.a.useContext(p);return Object(u.jsxs)("main",{children:[Object(u.jsxs)("section",{className:"profile",children:[Object(u.jsx)("div",{className:"profile__avatar-container",style:{backgroundImage:'url("'.concat(l.avatar,'")')},children:Object(u.jsx)("button",{className:"profile__avatar-edit",onClick:a})}),Object(u.jsxs)("div",{className:"profile__info",children:[Object(u.jsxs)("div",{className:"profile__info-title",children:[Object(u.jsx)("h1",{className:"profile__name",children:l.name}),Object(u.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"edit button",onClick:t})]}),Object(u.jsx)("p",{className:"profile__job-description",children:l.about})]}),Object(u.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"add button",onClick:n})]}),Object(u.jsx)("section",{className:"gallery",children:Object(u.jsx)("ul",{className:"gallery__list",children:s.map((function(e){return Object(u.jsx)(b,{card:e,onCardClick:c,onCardLike:r,onDeletePostClick:i},e._id)}))})})]})}function h(){return Object(u.jsx)("footer",{className:"footer",children:Object(u.jsx)("p",{className:"footer__copyrights",children:"\xa9 2021 Neta Hadar Itzhak"})})}function _(e){var t=e.card,n=e.onClose;return Object(u.jsx)("div",{className:"popup popup_type_photo ".concat(t.name?"popup_opened":""),children:Object(u.jsxs)("div",{className:"popup__container popup__container_type_photo",children:[Object(u.jsx)("button",{className:"popup__close-button popup__close-button_type_photo",type:"button",onClick:n}),Object(u.jsx)("div",{className:"popup__photo",style:{backgroundImage:"url(".concat(t.link,")")}}),Object(u.jsx)("h3",{className:"popup__text",children:t.name})]})})}var m=n(7),f=n(8),O=function(e,t){return fetch(e,t).then((function(e){if(e.ok)return e.json();Promise.reject("ERROR: ".concat(e.statusText))}))},v=new(function(){function e(t,n){Object(m.a)(this,e),this._baseUrl=t,this._headers=n}return Object(f.a)(e,[{key:"getUserInfo",value:function(){return O("".concat(this._baseUrl,"/users/me"),{headers:this._headers})}},{key:"setUserAvatar",value:function(e){return O("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.avatar})})}},{key:"getInitialCards",value:function(){return O("".concat(this._baseUrl,"/cards"),{headers:this._headers})}},{key:"setUserInfo",value:function(e){return O("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.name,about:e.about})})}},{key:"createNewCard",value:function(e){return O("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})})}},{key:"deleteCard",value:function(e){return O("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"_addLike",value:function(e){return O("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers})}},{key:"_dislike",value:function(e){return O("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers})}},{key:"changeLikeCardStatus",value:function(e,t){return t?this._dislike(e):this._addLike(e)}}]),e}())("https://around.nomoreparties.co/v1/group-12",{authorization:"12be1991-4f28-449f-a9a9-71d4704b25a2","Content-Type":"application/json"});function x(e){return Object(u.jsx)("div",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),children:Object(u.jsxs)("div",{className:"popup__container",children:[Object(u.jsx)("button",{className:"popup__close-button",type:"button",onClick:e.onClose}),Object(u.jsxs)("form",{className:"popup__form",name:e.name,onSubmit:e.onSubmit,children:[Object(u.jsx)("h2",{className:"popup__form-title",children:e.title}),e.children,Object(u.jsx)("button",{className:"popup__form-submit-button",type:"submit",children:e.buttonTitle})]})]})})}function k(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateUser,i=o.a.useState(""),c=Object(r.a)(i,2),s=c[0],l=c[1],d=o.a.useState(""),b=Object(r.a)(d,2),j=b[0],h=b[1];var _=o.a.useContext(p);return o.a.useEffect((function(){l(_.name),h(_.about)}),[_]),Object(u.jsxs)(x,{name:"profile",title:"Edit Profile",buttonTitle:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,about:j})},children:[Object(u.jsx)("input",{className:"popup__form-input",id:"name-input",type:"text",name:"name",value:s,onChange:function(e){l(e.target.value)},placeholder:"full name",minLength:"2",maxLength:"40",required:!0}),Object(u.jsx)("span",{id:"name-input-error"}),Object(u.jsx)("input",{className:"popup__form-input",id:"job-input",type:"text",name:"about",value:j,onChange:function(e){h(e.target.value)},placeholder:"job title",minLength:"2",maxLength:"200",required:!0}),Object(u.jsx)("span",{id:"job-input-error"})]})}function C(e){var t=e.isOpen,n=e.onClose,a=e.onUpdateAvatar,i=o.a.useRef();return Object(u.jsxs)(x,{name:"avatar",title:"Change profile picture",buttonTitle:"Save",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({avatar:i.current.value})},children:[Object(u.jsx)("input",{className:"popup__form-input",id:"avatar-link",type:"url",name:"link",placeholder:"avatar link",ref:i,required:!0}),Object(u.jsx)("span",{id:"avatar-link-error"})]})}function g(e){var t=e.isOpen,n=e.onClose,a=e.onAddPlaceSubmit,i=o.a.useState(""),c=Object(r.a)(i,2),s=c[0],l=c[1],d=o.a.useState(""),p=Object(r.a)(d,2),b=p[0],j=p[1];return Object(u.jsxs)(x,{name:"post",title:"New place",buttonTitle:"Create",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a({name:s,link:b})},children:[Object(u.jsx)("input",{className:"popup__form-input",id:"title-input",type:"text",name:"name",value:s,onChange:function(e){l(e.target.value)},placeholder:"Title",minLength:"1",maxLength:"30",required:!0}),Object(u.jsx)("span",{id:"title-input-error"}),Object(u.jsx)("input",{className:"popup__form-input",id:"link-input",type:"url",name:"link",value:b,onChange:function(e){j(e.target.value)},placeholder:"Image link",required:!0}),Object(u.jsx)("span",{id:"link-input-error"})]})}function y(e){var t=e.isOpen,n=e.onClose,a=e.onDeletePostSubmit;return Object(u.jsx)(x,{name:"delete",title:"Are you sure?",buttonTitle:"Yes",isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),a()}})}var N=function(){var e=o.a.useState(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],i=o.a.useState(!1),c=Object(r.a)(i,2),l=c[0],b=c[1],m=o.a.useState(!1),f=Object(r.a)(m,2),O=f[0],x=f[1],N=o.a.useState(!1),S=Object(r.a)(N,2),U=S[0],P=S[1],L=o.a.useState({name:"",link:""}),E=Object(r.a)(L,2),T=E[0],A=E[1],D=o.a.useState({name:"",about:"",avatar:"",_id:""}),I=Object(r.a)(D,2),w=I[0],q=I[1],J=o.a.useState([]),F=Object(r.a)(J,2),R=F[0],H=F[1],z=o.a.useState({_id:""}),B=Object(r.a)(z,2),M=B[0],Y=B[1];function G(){a(!1),b(!1),x(!1),P(!1),A({name:"",link:""})}return o.a.useEffect((function(){v.getInitialCards().then((function(e){H(e)})).catch(console.log)}),[]),o.a.useEffect((function(){v.getUserInfo().then((function(e){q({name:e.name,about:e.about,avatar:e.avatar,_id:e._id})})).catch(console.log)}),[]),Object(u.jsx)(p.Provider,{value:w,children:Object(u.jsxs)("div",{className:"content",children:[Object(u.jsx)(d,{}),Object(u.jsx)(j,{onEditProfileClick:function(){b(!0)},onAddPlaceClick:function(){x(!0)},onEditAvatarClick:function(){a(!0)},onDeletePostClick:function(e){P(!0),Y({_id:e._id})},onCardClick:function(e){A({name:e.name,link:e.link})},cards:R,onCardLike:function(e){var t=e.likes.some((function(e){return e._id===w._id}));v.changeLikeCardStatus(e._id,t).then((function(t){H((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch(console.log)}}),Object(u.jsx)(h,{}),Object(u.jsxs)("section",{children:[Object(u.jsx)(k,{isOpen:l,onClose:G,onUpdateUser:function(e){v.setUserInfo(e).then((function(e){q({name:e.name,about:e.about,avatar:e.avatar,_id:e._id}),G()})).catch(console.log)}}),Object(u.jsx)(g,{isOpen:O,onClose:G,onAddPlaceSubmit:function(e){v.createNewCard(e).then((function(e){H([e].concat(Object(s.a)(R))),G()})).catch(console.log)}}),Object(u.jsx)(_,{card:T,onClose:G}),Object(u.jsx)(y,{isOpen:U,onClose:G,onDeletePostSubmit:function(){v.deleteCard(M._id).then((function(){var e=R.filter((function(e){return e._id!==M._id}));H(e),G()})).catch(console.log)}}),Object(u.jsx)(C,{isOpen:n,onClose:G,onUpdateAvatar:function(e){v.setUserAvatar(e).then((function(e){q({name:e.name,about:e.about,avatar:e.avatar,_id:e._id}),G()})).catch(console.log)}})]})]})})},S=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),i(e),c(e)}))};c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(N,{})}),document.getElementById("root")),S()}},[[16,1,2]]]);
//# sourceMappingURL=main.c3c0a0b6.chunk.js.map